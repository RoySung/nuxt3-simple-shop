import{_ as j,a as L,b as S}from"./ProductDialog.bfb40464.js";import{B as U,j as O,C as H,D as F,E as R,u as z,F as T,G as K,a as A,o as h,c as N,w as $,f as p,h as V,t as M,m as q,i as E,H as G,I as J,e as I,J as Q,K as W,k as B,l as X}from"./entry.d67704bf.js";const Y=()=>null;function Z(...o){var v,x,g,b,D,C,w,k,d;const r=typeof o[o.length-1]=="string"?o.pop():void 0;typeof o[0]!="string"&&o.unshift(r);let[n,c,t={}]=o;if(typeof n!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof c!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");t.server=(v=t.server)!=null?v:!0,t.default=(x=t.default)!=null?x:Y,t.defer&&console.warn("[useAsyncData] `defer` has been renamed to `lazy`. Support for `defer` will be removed in RC."),t.lazy=(b=(g=t.lazy)!=null?g:t.defer)!=null?b:!1,t.initialCache=(D=t.initialCache)!=null?D:!0,t.immediate=(C=t.immediate)!=null?C:!0;const e=U(),l=()=>(e.isHydrating||t.initialCache)&&e.payload.data[n]!==void 0;e._asyncData[n]||(e._asyncData[n]={data:O(l()?e.payload.data[n]:(k=(w=t.default)==null?void 0:w.call(t))!=null?k:null),pending:O(!l()),error:O((d=e.payload._errors[n])!=null?d:null)});const a={...e._asyncData[n]};a.refresh=a.execute=(u={})=>{if(e._asyncDataPromises[n]){if(u.dedupe===!1)return e._asyncDataPromises[n];e._asyncDataPromises[n].cancelled=!0}if(u._initial&&l())return e.payload.data[n];a.pending.value=!0;const i=new Promise((s,y)=>{try{s(c(e))}catch(P){y(P)}}).then(s=>{if(i.cancelled)return e._asyncDataPromises[n];t.transform&&(s=t.transform(s)),t.pick&&(s=tt(s,t.pick)),a.data.value=s,a.error.value=null}).catch(s=>{var y,P;if(i.cancelled)return e._asyncDataPromises[n];a.error.value=s,a.data.value=z((P=(y=t.default)==null?void 0:y.call(t))!=null?P:null)}).finally(()=>{i.cancelled||(a.pending.value=!1,e.payload.data[n]=a.data.value,a.error.value&&(e.payload._errors[n]=!0),delete e._asyncDataPromises[n])});return e._asyncDataPromises[n]=i,e._asyncDataPromises[n]};const f=()=>a.refresh({_initial:!0}),m=t.server!==!1&&e.payload.serverRendered;{const u=T();if(u&&!u._nuxtOnBeforeMountCbs){u._nuxtOnBeforeMountCbs=[];const s=u._nuxtOnBeforeMountCbs;u&&(H(()=>{s.forEach(y=>{y()}),s.splice(0,s.length)}),F(()=>s.splice(0,s.length)))}m&&e.isHydrating&&n in e.payload.data?a.pending.value=!1:u&&(e.payload.serverRendered&&e.isHydrating||t.lazy)&&t.immediate?u._nuxtOnBeforeMountCbs.push(f):t.immediate&&f(),t.watch&&R(t.watch,()=>a.refresh());const i=e.hook("app:data:refresh",s=>{if(!s||s.includes(n))return a.refresh()});u&&F(i)}const _=Promise.resolve(e._asyncDataPromises[n]).then(()=>a);return Object.assign(_,a),_}function tt(o,r){const n={};for(const c of r)n[c]=o[c];return n}function et(o,r,n){const[c={},t]=typeof r=="string"?[{},r]:[r,n],e=c.key||t;if(!e||typeof e!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+e);if(!o)throw new Error("[nuxt] [useFetch] request is missing.");const l="$f"+e,a=K(()=>{let i=o;return typeof i=="function"&&(i=i()),z(i)}),{server:f,lazy:m,default:_,transform:v,pick:x,watch:g,initialCache:b,immediate:D,...C}=c,w={...C,cache:typeof c.cache=="boolean"?void 0:c.cache},k={server:f,lazy:m,default:_,transform:v,pick:x,initialCache:b,immediate:D,watch:[a,...g||[]]};let d;return Z(l,()=>{var i;return(i=d==null?void 0:d.abort)==null||i.call(d),d=typeof AbortController<"u"?new AbortController:{},$fetch(a.value,{signal:d.signal,...w})},k)}const nt={class:"product-item"},at={class:"product-item__content"},ot=["textContent"],st=["textContent"],rt=A({__name:"ProductItem",props:{product:{type:Object,required:!0}},setup(o){return(r,n)=>{const c=q;return h(),N(c,{to:{name:"products-id",params:{id:o.product.product_id}}},{default:$(()=>[p("div",nt,[p("div",{class:"product-item__img-wrap",style:V({backgroundImage:`url(${o.product.product_img_path})`})},null,4),p("div",at,[p("h3",{class:"product-item__content__title",textContent:M(o.product.product_name)},null,8,ot),p("div",{class:"product-item__content__desc",textContent:M(o.product.product_description)},null,8,st)])])]),_:1},8,["to"])}}}),ct=E(rt,[["__scopeId","data-v-bb5a7558"]]),it={class:"product-list"},ut={class:"product-list__content"},dt=A({__name:"ProductList",async setup(o){let r,n;const t=G().public.apiBase,{data:e}=([r,n]=J(()=>et(t+"/products.json","$1UzgvBsa8U")),r=await r,n(),r),l=()=>{};return(a,f)=>{const m=ct;return h(),I("div",it,[p("div",ut,[(h(!0),I(Q,null,W(z(e),_=>(h(),N(m,{key:_.product_id,product:_},null,8,["product"]))),128))]),p("div",{class:"product-list__footer"},[p("button",{class:"load-more-btn",onClick:l}," Load More ")])])}}}),lt=E(dt,[["__scopeId","data-v-62514f5f"]]),_t={class:"products-page"},pt={class:"products-content"},ft=A({__name:"index",setup(o){const r=O(!1),n=()=>{r.value=!0},c=t=>{console.log("product: ",t)};return(t,e)=>{const l=S,a=j,f=lt,m=L;return h(),I("div",_t,[B(a,{title:"Product Shelf"},{right:$(()=>[B(l,{"on-click":n},{default:$(()=>[X(" Create ")]),_:1})]),_:1}),p("div",pt,[B(f)]),B(m,{isOpen:r.value,"onUpdate:isOpen":e[0]||(e[0]=_=>r.value=_),"onUpdate:product":c},null,8,["isOpen"])])}}});const ht=E(ft,[["__scopeId","data-v-86542b45"]]);export{ht as default};
